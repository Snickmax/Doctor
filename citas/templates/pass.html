<div class="container-fluid">
  <form id="passForm" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <!-- Contraseña Nueva 1 -->
    <div class="form-floating">
      <input id="new_password1" type="password" name="new_password1" class="form-control" placeholder="Contraseña"
        maxlength="128" required />
      <label for="new_password1">Contraseña</label>
      <div class="invalid-feedback"></i>Por favor ingrese la contraseña.</div>
    </div>
    <!-- Contraseña Nueva 2 -->
    <div class="form-floating" style="margin-top: 10px">
      <input id="new_password2" type="password" name="new_password2" class="form-control"
        placeholder="Confirmar contraseña" maxlength="128" required />
      <label for="new_password2">Confirmar contraseña</label>
      <div class="invalid-feedback"></i>Por favor confirme la contraseña.</div>
    </div>
    <div class="alert alert-success" role="alert" style="display: none; margin-top: 10px"></div>
    <!-- Botones -->
    <div style="display: flex; justify-content: space-between;">
      <div style="text-align: left">
        <button id="btnEditar" type="button" class="btn btn-primary mt-3 btn-lg" data-form-type="editar"
          data-bs-target="#modalBase" data-user-id="{{ form.user.id }}">
          Editar Usuario
        </button>
      </div>
      <div style="text-align: right">
        <button id="submitButton" type="submit" data-user-id="{{ form.user.id }}" class="btn btn-primary mt-3 btn-lg">
          <span id="spinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
            style="display: none;"></span>
          Guardar
        </button>
      </div>
    </div>
  </form>
</div>

<script>
  $(document).ready(function () {
    $("#btnEditar").click(function () {
      var userId = $(this).data("user-id"); // Obtiene el ID del usuario
      var requestData = { form_type: "editar" }; // Inicializa los datos de la solicitud

      // Agrega el ID del usuario a los datos de la solicitud
      if (userId) {
        requestData.user_id = userId;
      }
      $.ajax({
        url: "/home/cargar_formulario/", // Ruta a la vista que devuelve el formulario
        type: "GET",
        data: requestData, // Envía el tipo de formulario y el ID del usuario a la vista
        success: function (response) {
          $("#modalBase .modal-body").empty(); // Vacía el cuerpo del modal
          $("#modalBase .modal-body").html(response.form_html); // Carga el nuevo formulario en el cuerpo del modal
          $("#modalBase .modal-title").html(response.titulo_modal);
          $("#editarForm").attr("data-user-id", userId);
        },
        error: function (xhr, errmsg, err) {
        },
      });
    });
  });
</script>